<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Echo</title>
        <style>
            h1, h2, p, th, td { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica', sans-serif; }
            h1, h2, p { text-align: center; }
            thead { font-weight: bold; }

            table {
                margin-left: auto;
                margin-right: auto;
                border-collapse: collapse;
            }

            th, td {
                text-align: left;
                padding: 8px;
                border: 1px solid #ddd;
            }

            tr:nth-child(even) { background-color: #f2f2f2; }

            th {
                background-color: #4e9dce;
                color: white;
            }

            @media (prefers-color-scheme: dark) {
                body { background-color: #000; }
                * { color: #fff; }
                tr:nth-child(even) { background-color: #222222; }
            }
        </style>
    </head>
    <body>
        <h1>Echo</h1>
        <p>Generated at {{date}}</p>

        <h2>Basic Info</h2>
        <table>
            <tr>
                <td>URL</td>
                <td>{{url}}</td>
            </tr>
            <tr>
                <td>Method</td>
                <td>{{method}}</td>
            </tr>
            <tr>
                <td>Protocol</td>
                <td>{{protocol}}</td>
            </tr>
            <tr>
                <td>TLS Version</td>
                <td>{{tlsVersion}}</td>
            </tr>
        </table>

        <hr />
        <h2>Body</h2>
        <pre>
        {{#if body}}
            {{body}}
        {{else}}
            (empty body)
        {{/if}}
        </pre>

        <hr />
        <h2>Headers</h2>
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Value</th>
                </tr>
            </thead>
            {{#each headers}}
            <tr>
                <td>{{title @key}}</td>
                <td>{{this}}</td>
            </tr>
            {{/each}}
        </table>

        <hr />
        <h2>Geolocation</h2>
        <table>
            <tr>
                <td>IP Address</td>
                <td>{{geo.ip}}</td>
            </tr>
            <tr>
                <td>AS Number</td>
                <td>{{geo.asNumber}}</td>
            </tr>
            <tr>
                <td>AS Organization</td>
                <td>{{geo.asOrganization}}</td>
            </tr>
            <tr>
                <td>Country</td>
                <td>{{geo.country}}</td>
            </tr>
            <tr>
                <td>Region</td>
                <td>{{geo.region}}</td>
            </tr>
            <tr>
                <td>City</td>
                <td>{{geo.city}}</td>
            </tr>
            <tr>
                <td>Timezone</td>
                <td>{{geo.timezone}}</td>
            </tr>
            <tr>
                <td>Latitude</td>
                <td>{{geo.latitude}}</td>
            </tr>
            <tr>
                <td>Longitude</td>
                <td>{{geo.longitude}}</td>
            </tr>
            <tr>
                <td>Round-Trip Time</td>
                <td>{{geo.rtt}}</td>
            </tr>
        </table>

        <hr />
        <h2>Fingerprint</h2>
        <noscript>
            <p>JavaScript appears to be disabled.</p>
        </noscript>

        <table id="fingerprint"></table>
        <script>
            function addData(name, value) {
                const row = document.getElementById("fingerprint").insertRow();
                const nameCell = row.insertCell(0);
                const valueCell = row.insertCell(1);
                nameCell.textContent = name;
                valueCell.textContent = value;
            }

            addData("Vendor", navigator.vendor);
            addData("Platform", navigator.platform);
            addData("Resolution", `${window.screen.width}x${window.screen.height}`);
            addData("Language(s)", navigator.languages.join(", "));
            addData("CPU Cores", navigator.hardwareConcurrency);
        </script>
    </body>
</html>
